{"ast":null,"code":"var _jsxFileName = \"/Users/ozmatron/therapy_box/client/src/pages/image-page.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport ImageUploader from 'react-images-upload';\nimport styles from './styles/image-page.module.css';\nimport { Grid, Row, Col } from 'react-flexbox-grid';\n\nclass ImageUpload extends React.Component {\n  //     constructor(props) {\n  //         super(props);\n  //         this.state ={\n  //             file: null\n  //         };\n  //         this.onFormSubmit = this.onFormSubmit.bind(this);\n  //         this.onChange = this.onChange.bind(this);\n  //     }\n  //     onFormSubmit(e){\n  //         e.preventDefault();\n  //         const formData = new FormData();\n  //         formData.append('upload',this.state.file);\n  //         for (var key of formData.entries()) {\n  //                 console.log(key[0] + ', ' + key[1]);\n  //             }\n  //         const config = {\n  //             headers: {\n  //                 'content-type': 'multipart/form-data'\n  //             }\n  //         };\n  //         axios.post(\"http://localhost:8080/api/upload\",formData,config)\n  //             .then((response) => {\n  //                 alert(\"The file is successfully uploaded\");\n  //             }).catch((error) => {\n  //         });\n  //     }\n  //     onChange(e) {\n  //         this.setState({file:e.target.files[0]});\n  //     }\n  //     render() {\n  //         console.log(this.state.file)\n  //         return (\n  //             <form onSubmit={this.onFormSubmit}>\n  //                 <h1>File Upload</h1>\n  //                 <input type=\"file\" name=\"myImage\" onChange= {this.onChange} />\n  //                 <button type=\"submit\">Upload</button>\n  //             </form>\n  //         )\n  //     }\n  // }\n  ////////////\n  constructor(props) {\n    super(props);\n    this.state = {\n      pictures: [],\n      userId: null\n    };\n    this.onDrop = this.onDrop.bind(this);\n  }\n\n  componentDidMount() {\n    if (!this.state.userId) {\n      this.getUserId();\n    }\n  }\n\n  getUserId() {\n    axios.get(`http://localhost:8080/api/user_data`).then(response => {\n      this.setState({\n        userId: response.data.id\n      });\n    });\n  }\n\n  onDrop(picture) {\n    this.setState({\n      pictures: this.state.pictures.concat(picture)\n    });\n  }\n\n  uploadImage() {\n    const formData = new FormData();\n    formData.append('upload', this.state.pictures);\n    console.log(this.state.pictures); // for (var key of formData.entries()) {\n    //     console.log(key[0] + ', ' + key[1]);\n    // }\n\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    axios.post(\"http://localhost:8080/api/upload\", formData, config, {}).then(res => {\n      console.log(res);\n    });\n  }\n\n  render() {\n    //   console.log(this.state.pictures[0])\n    if (this.state.pictures.length > 0) {\n      this.uploadImage();\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      className: styles.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }\n    }, \"Image Upload\"))), /*#__PURE__*/React.createElement(Row, {\n      className: styles.wrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      xs: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(ImageUploader, {\n      withIcon: true,\n      buttonText: \"Choose images\",\n      onChange: this.onDrop,\n      imgExtension: ['.jpg', '.gif', '.png', '.gif'],\n      maxFileSize: 5242880,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    }))));\n  }\n\n}\n\nexport default ImageUpload;","map":{"version":3,"sources":["/Users/ozmatron/therapy_box/client/src/pages/image-page.js"],"names":["React","axios","ImageUploader","styles","Grid","Row","Col","ImageUpload","Component","constructor","props","state","pictures","userId","onDrop","bind","componentDidMount","getUserId","get","then","response","setState","data","id","picture","concat","uploadImage","formData","FormData","append","console","log","config","headers","post","res","render","length","title","wrapper"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport ImageUploader from 'react-images-upload';\nimport styles from './styles/image-page.module.css'; \nimport { Grid, Row, Col } from 'react-flexbox-grid';\n\nclass ImageUpload extends React.Component {\n\n\n//     constructor(props) {\n//         super(props);\n//         this.state ={\n//             file: null\n//         };\n//         this.onFormSubmit = this.onFormSubmit.bind(this);\n//         this.onChange = this.onChange.bind(this);\n//     }\n//     onFormSubmit(e){\n//         e.preventDefault();\n//         const formData = new FormData();\n//         formData.append('upload',this.state.file);\n//         for (var key of formData.entries()) {\n//                 console.log(key[0] + ', ' + key[1]);\n//             }\n//         const config = {\n//             headers: {\n//                 'content-type': 'multipart/form-data'\n//             }\n//         };\n//         axios.post(\"http://localhost:8080/api/upload\",formData,config)\n//             .then((response) => {\n//                 alert(\"The file is successfully uploaded\");\n//             }).catch((error) => {\n//         });\n//     }\n//     onChange(e) {\n//         this.setState({file:e.target.files[0]});\n//     }\n\n//     render() {\n//         console.log(this.state.file)\n//         return (\n//             <form onSubmit={this.onFormSubmit}>\n//                 <h1>File Upload</h1>\n//                 <input type=\"file\" name=\"myImage\" onChange= {this.onChange} />\n//                 <button type=\"submit\">Upload</button>\n//             </form>\n//         )\n//     }\n// }\n\n\n////////////\n    constructor(props) {\n        super(props);\n         this.state = { \n            pictures: [],\n            userId: null\n            };\n         this.onDrop = this.onDrop.bind(this);\n    }\n\n    componentDidMount() {\n        if (!this.state.userId) {\n          this.getUserId();\n        }\n      }\n    \n    getUserId() {\n        axios.get(`http://localhost:8080/api/user_data`)\n        .then((response) => {\n            this.setState({userId: response.data.id})\n        })\n    }\n\n    onDrop(picture) {\n        this.setState({\n            pictures: this.state.pictures.concat(picture),\n        });\n    }\n\n    uploadImage() {\n        const formData = new FormData()\n        formData.append('upload', this.state.pictures)\n        console.log(this.state.pictures)\n        // for (var key of formData.entries()) {\n        //     console.log(key[0] + ', ' + key[1]);\n        // }\n        const config = {\n            headers: {\n                'content-type': 'multipart/form-data'\n            }\n        };\n        axios.post(\"http://localhost:8080/api/upload\", formData, config, {\n        }).then(res => {\n            console.log(res)\n        })\n    }\n\n  render() {\n    //   console.log(this.state.pictures[0])\n      if (this.state.pictures.length > 0) {\n          this.uploadImage()\n      }\n    return (\n        <React.Fragment>\n            <Row className={styles.title}>\n                <Col xs={12} >\n                    <h1>Image Upload</h1>\n                </Col>\n            </Row>\n            <Row className={styles.wrapper} >\n                <Col xs={6} >\n                    <ImageUploader\n                    withIcon={true}\n                    buttonText='Choose images'\n                    onChange={this.onDrop}\n                    imgExtension={['.jpg', '.gif', '.png', '.gif']}\n                    maxFileSize={5242880}\n                />\n                </Col>\n            </Row>\n        \n        </React.Fragment>\n    );\n  }\n}\n\nexport default ImageUpload;"]},"metadata":{},"sourceType":"module"}